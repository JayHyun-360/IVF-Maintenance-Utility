{"version":3,"sources":["../../../../../../apps/web/src/components/Button.tsx","../../../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","../../../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../../../apps/web/src/lib/z-index.ts","../../../../../../apps/web/src/components/AuthGuard.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useTheme } from \"@/components/ThemeProvider\";\r\n\r\ninterface ButtonProps {\r\n  children: React.ReactNode;\r\n  onClick?: () => void;\r\n  type?: \"button\" | \"submit\" | \"reset\";\r\n  variant?: \"primary\" | \"secondary\" | \"danger\" | \"ghost\";\r\n  size?: \"sm\" | \"md\" | \"lg\" | \"mobile\";\r\n  disabled?: boolean;\r\n  loading?: boolean;\r\n  className?: string;\r\n  fullWidth?: boolean;\r\n  hapticFeedback?: boolean;\r\n  onTouchStart?: () => void;\r\n  onTouchEnd?: () => void;\r\n}\r\n\r\nexport default function Button({\r\n  children,\r\n  onClick,\r\n  type = \"button\",\r\n  variant = \"primary\",\r\n  size = \"md\",\r\n  disabled = false,\r\n  loading = false,\r\n  className = \"\",\r\n  fullWidth = false,\r\n  hapticFeedback = true,\r\n  onTouchStart,\r\n  onTouchEnd,\r\n}: ButtonProps) {\r\n  const { themeConfig } = useTheme();\r\n\r\n  const triggerHapticFeedback = () => {\r\n    if (hapticFeedback && \"vibrate\" in navigator) {\r\n      navigator.vibrate(10);\r\n    }\r\n  };\r\n\r\n  const handleTouchStart = () => {\r\n    triggerHapticFeedback();\r\n    onTouchStart?.();\r\n  };\r\n\r\n  const handleClick = () => {\r\n    triggerHapticFeedback();\r\n    onClick?.();\r\n  };\r\n\r\n  const getVariantStyles = () => {\r\n    switch (variant) {\r\n      case \"primary\":\r\n        return {\r\n          background: `linear-gradient(135deg, ${themeConfig.colors.primary} 0%, ${themeConfig.colors.secondary} 100%)`,\r\n          color: \"#FFFFFF\",\r\n          border: `1px solid ${themeConfig.colors.primary}`,\r\n          boxShadow: `0 4px 14px 0 ${themeConfig.colors.primary}25`,\r\n        };\r\n      case \"secondary\":\r\n        return {\r\n          backgroundColor: themeConfig.colors.surface,\r\n          color: themeConfig.colors.text,\r\n          border: `1px solid ${themeConfig.colors.border}`,\r\n        };\r\n      case \"danger\":\r\n        return {\r\n          background: `linear-gradient(135deg, ${themeConfig.colors.error} 0%, #DC2626 100%)`,\r\n          color: \"#FFFFFF\",\r\n          border: `1px solid ${themeConfig.colors.error}`,\r\n          boxShadow: `0 4px 14px 0 ${themeConfig.colors.error}25`,\r\n        };\r\n      case \"ghost\":\r\n        return {\r\n          backgroundColor: \"transparent\",\r\n          color: themeConfig.colors.text,\r\n          border: `1px solid ${themeConfig.colors.border}`,\r\n        };\r\n      default:\r\n        return {\r\n          background: `linear-gradient(135deg, ${themeConfig.colors.primary} 0%, ${themeConfig.colors.secondary} 100%)`,\r\n          color: \"#FFFFFF\",\r\n          border: `1px solid ${themeConfig.colors.primary}`,\r\n          boxShadow: `0 4px 14px 0 ${themeConfig.colors.primary}25`,\r\n        };\r\n    }\r\n  };\r\n\r\n  const getSizeStyles = () => {\r\n    switch (size) {\r\n      case \"sm\":\r\n        return \"px-3 py-2 text-xs sm:text-sm\";\r\n      case \"md\":\r\n        return \"px-4 py-3 text-sm sm:text-base\";\r\n      case \"lg\":\r\n        return \"px-6 py-4 text-base sm:text-lg\";\r\n      case \"mobile\":\r\n        return \"px-4 py-4 text-base min-h-[44px] min-w-[44px]\";\r\n      default:\r\n        return \"px-4 py-3 text-sm sm:text-base\";\r\n    }\r\n  };\r\n\r\n  const styles = getVariantStyles();\r\n\r\n  return (\r\n    <button\r\n      type={type}\r\n      onClick={handleClick}\r\n      onTouchStart={handleTouchStart}\r\n      onTouchEnd={onTouchEnd}\r\n      disabled={disabled || loading}\r\n      className={`\r\n        ${getSizeStyles()}\r\n        ${fullWidth ? \"w-full\" : \"\"}\r\n        rounded-xl font-medium transition-all duration-300 \r\n        hover:scale-105 hover:shadow-xl active:scale-95\r\n        disabled:opacity-50 disabled:cursor-not-allowed\r\n        disabled:hover:scale-100 disabled:hover:shadow-lg\r\n        ${hapticFeedback ? \"haptic-feedback\" : \"\"}\r\n        touch-manipulation\r\n        ${className}\r\n      `}\r\n      style={styles}\r\n    >\r\n      {loading ? (\r\n        <div className=\"flex items-center justify-center space-x-2\">\r\n          <div className=\"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin\" />\r\n          <span>Loading...</span>\r\n        </div>\r\n      ) : (\r\n        children\r\n      )}\r\n    </button>\r\n  );\r\n}\r\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","// Z-index management system to prevent overlaying issues\r\nexport const Z_INDEX = {\r\n  // Base layers\r\n  BASE: 0,\r\n  DROPDOWN: 10,\r\n  DROPDOWN_CONTENT: 11, // For dropdown content to appear above dropdown trigger\r\n  STICKY: 20,\r\n\r\n  // Overlay layers\r\n  MODAL_BACKDROP: 1000,\r\n  MODAL: 1001,\r\n  TOOLTIP: 1002,\r\n  NOTIFICATION: 1003,\r\n\r\n  // Highest priority\r\n  MAX: 9999,\r\n} as const;\r\n\r\n// CSS custom properties for consistent z-index usage\r\nexport const Z_INDEX_VARS = {\r\n  \"--z-base\": Z_INDEX.BASE,\r\n  \"--z-dropdown\": Z_INDEX.DROPDOWN,\r\n  \"--z-sticky\": Z_INDEX.STICKY,\r\n  \"--z-modal-backdrop\": Z_INDEX.MODAL_BACKDROP,\r\n  \"--z-modal\": Z_INDEX.MODAL,\r\n  \"--z-tooltip\": Z_INDEX.TOOLTIP,\r\n  \"--z-notification\": Z_INDEX.NOTIFICATION,\r\n  \"--z-max\": Z_INDEX.MAX,\r\n} as const;\r\n","\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { useSession } from \"next-auth/react\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\ninterface AuthGuardProps {\r\n  children: React.ReactNode;\r\n  requiredRole?: \"ADMIN\" | \"USER\";\r\n  redirectTo?: string;\r\n}\r\n\r\nexport default function AuthGuard({\r\n  children,\r\n  requiredRole,\r\n  redirectTo = \"/login\",\r\n}: AuthGuardProps) {\r\n  const { data: session, status } = useSession();\r\n  const router = useRouter();\r\n  const [isChecking] = useState(() => {\r\n    if (status === \"loading\") return true;\r\n    if (!session) return false;\r\n    if (requiredRole && session.user?.role !== requiredRole) return false;\r\n    return false;\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (status === \"loading\") return;\r\n\r\n    if (!session) {\r\n      router.push(redirectTo);\r\n      return;\r\n    }\r\n\r\n    if (requiredRole && session.user?.role !== requiredRole) {\r\n      // If user is logged in but doesn't have required role\r\n      if (requiredRole === \"ADMIN\" && session.user?.role !== \"ADMIN\") {\r\n        router.push(\"/student\"); // Redirect non-admin users to user dashboard\r\n      } else if (requiredRole === \"USER\" && session.user?.role === \"ADMIN\") {\r\n        // Allow admins to access user pages but don't redirect them away\r\n        // They can choose to go back to homepage if needed\r\n      } else {\r\n        router.push(\"/login\"); // Redirect to login for other cases\r\n      }\r\n      return;\r\n    }\r\n  }, [session, status, router, requiredRole, redirectTo]);\r\n\r\n  if (status === \"loading\" || isChecking) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return <>{children}</>;\r\n}\r\n"],"names":["module","exports","require","vendored","AppRouterContext","HooksClientContext","ServerInsertedHtml"],"mappings":"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","ignoreList":[1,2,3]}