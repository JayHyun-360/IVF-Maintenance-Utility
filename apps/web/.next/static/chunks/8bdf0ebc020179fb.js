(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,r,s)=>{r.exports=e.r(76562)},99809,e=>{"use strict";var r=e.i(71645);function s(){let[e,s]=(0,r.useState)({isMobile:!1,isTablet:!1,isDesktop:!0,screenWidth:1024,screenHeight:768,orientation:"landscape",supportsTouch:!1,supportsHaptic:!1,safeAreaInsets:{top:0,right:0,bottom:0,left:0}});return(0,r.useEffect)(()=>(setTimeout(()=>{let e=()=>{let e=window.innerWidth,r=window.innerHeight,t=getComputedStyle(document.documentElement),o={top:parseInt(t.getPropertyValue("--mobile-safe-area-top")||"0"),right:parseInt(t.getPropertyValue("--mobile-safe-area-right")||"0"),bottom:parseInt(t.getPropertyValue("--mobile-safe-area-bottom")||"0"),left:parseInt(t.getPropertyValue("--mobile-safe-area-left")||"0")};s({isMobile:e<768,isTablet:e>=768&&e<1024,isDesktop:e>=1024,screenWidth:e,screenHeight:r,orientation:e>r?"landscape":"portrait",supportsTouch:"ontouchstart"in window||navigator.maxTouchPoints>0,supportsHaptic:"vibrate"in navigator,safeAreaInsets:o})};e();let r=new ResizeObserver(e);r.observe(document.body);let t=()=>{setTimeout(e,100)};return window.addEventListener("orientationchange",t),window.addEventListener("resize",e),()=>{r.disconnect(),window.removeEventListener("orientationchange",t),window.removeEventListener("resize",e)}},100),()=>{}),[]),e}function t(){let{supportsHaptic:e}=s(),r=(r=10)=>{if(e&&navigator.vibrate)try{navigator.vibrate(r)}catch(e){console.warn("Haptic feedback not supported:",e)}};return{triggerHaptic:r,triggerLightHaptic:()=>r(10),triggerMediumHaptic:()=>r([10,50,10]),triggerHeavyHaptic:()=>r([20,100,20]),triggerSuccessHaptic:()=>r([10,30,10,30,10]),triggerErrorHaptic:()=>r([50,50,50,50,50]),supportsHaptic:e}}e.s(["useHapticFeedback",()=>t,"useMobileOptimizations",()=>s])},87896,e=>{"use strict";var r=e.i(43476),s=e.i(71645),t=e.i(17255),o=e.i(18566),l=e.i(8013);function a({children:e,requiredRole:a,redirectTo:i="/login"}){let{data:n,status:c}=(0,t.useSession)(),d=(0,o.useRouter)(),{themeConfig:u}=(0,l.useTheme)(),[m,x]=(0,s.useState)(!1),[p,h]=(0,s.useState)("");return((0,s.useEffect)(()=>{let e=setTimeout(()=>{"loading"===c&&(x(!0),h(`Status: ${c}, Session: ${!!n}, Required Role: ${a}`))},5e3);return()=>clearTimeout(e)},[c,n,a]),(0,s.useEffect)(()=>{if(console.log("AuthGuard Debug:",{status:c,hasSession:!!n,userRole:n?.user?.role,requiredRole:a,redirectTo:i}),"loading"!==c){if(!n){console.log("No session found, redirecting to:",i),d.push(i);return}if(a&&n.user?.role!==a){console.log("Role mismatch:",{userRole:n.user?.role,requiredRole:a}),"ADMIN"===a&&n.user?.role!=="ADMIN"?d.push("/student"):"USER"===a&&n.user?.role==="ADMIN"||d.push("/login");return}}},[n,c,d,a,i]),"loading"===c)?m?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:u.colors.background},children:(0,r.jsxs)("div",{className:"text-center max-w-md mx-auto p-6",children:[(0,r.jsx)("div",{className:"rounded-full h-12 w-12 mx-auto mb-4 flex items-center justify-center",style:{backgroundColor:`${u.colors.warning}20`},children:(0,r.jsx)("svg",{className:"w-6 h-6",style:{color:u.colors.warning},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,r.jsx)("p",{style:{color:u.colors.text,fontFamily:"Inter, system-ui, sans-serif",marginBottom:"16px"},children:"Authentication is taking longer than expected"}),p&&(0,r.jsx)("p",{style:{color:u.colors.textSecondary,fontFamily:"monospace",fontSize:"12px",marginBottom:"16px"},children:p}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("button",{onClick:()=>window.location.reload(),style:{backgroundColor:u.colors.primary,color:"white",padding:"8px 16px",borderRadius:"6px",fontSize:"14px",cursor:"pointer",marginRight:"8px"},children:"Refresh Page"}),(0,r.jsx)("button",{onClick:()=>d.push("/login"),style:{backgroundColor:u.colors.textSecondary,color:"white",padding:"8px 16px",borderRadius:"6px",fontSize:"14px",cursor:"pointer"},children:"Go to Login"})]})]})}):(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:u.colors.background},children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 mx-auto mb-4",style:{borderColor:u.colors.primary}}),(0,r.jsx)("p",{style:{color:u.colors.text,fontFamily:"Inter, system-ui, sans-serif"},children:"Verifying access..."}),(0,r.jsxs)("p",{style:{color:u.colors.textSecondary,fontFamily:"Inter, system-ui, sans-serif",fontSize:"12px",marginTop:"8px"},children:["Status: ",c]})]})}):(0,r.jsx)(r.Fragment,{children:e})}e.s(["default",()=>a])},63582,e=>{"use strict";var r=e.i(43476),s=e.i(8013);function t({children:e,onClick:t,type:o="button",variant:l="primary",size:a="md",disabled:i=!1,loading:n=!1,className:c="",fullWidth:d=!1,hapticFeedback:u=!0,onTouchStart:m,onTouchEnd:x,style:p={}}){let{themeConfig:h}=(0,s.useTheme)(),b=()=>{u&&"vibrate"in navigator&&navigator.vibrate(10)},f=(()=>{switch(l){case"primary":default:return{backgroundColor:h.colors.primary,color:h.colors.secondary,border:`1px solid ${h.colors.primary}`,boxShadow:"0 1px 2px 0 rgb(0 0 0 / 0.05)"};case"secondary":return{backgroundColor:h.colors.surface,color:h.colors.text,border:`1px solid ${h.colors.border}`};case"danger":return{backgroundColor:h.colors.error,color:h.colors.secondary,border:`1px solid ${h.colors.error}`,boxShadow:"0 1px 2px 0 rgb(0 0 0 / 0.05)"};case"ghost":return{backgroundColor:"transparent",color:h.colors.text,border:`1px solid ${h.colors.border}`}}})();return(0,r.jsx)("button",{type:o,onClick:()=>{b(),t?.()},onTouchStart:()=>{b(),m?.()},onTouchEnd:x,disabled:i||n,className:`
        ${(()=>{switch(a){case"sm":return"px-3 py-2 text-xs";case"md":default:return"px-4 py-3 text-sm";case"lg":return"px-6 py-4 text-base";case"mobile":return"px-4 py-4 text-base min-h-[44px] min-w-[44px]"}})()}
        ${d?"w-full":""}
        rounded-md font-medium transition-all duration-200 
        hover:shadow-sm active:scale-95
        disabled:opacity-50 disabled:cursor-not-allowed
        disabled:hover:shadow-none disabled:hover:scale-100
        ${u?"haptic-feedback":""}
        touch-manipulation
        ${c}
      `,style:{...f,...p},children:n?(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,r.jsx)("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),(0,r.jsx)("span",{children:"Loading..."})]}):e})}e.s(["default",()=>t])},75176,e=>{"use strict";var r=e.i(43476),s=e.i(71645),t=e.i(18566),o=e.i(8013),l=e.i(99809);function a({title:e,breadcrumbs:a=[],showMenuToggle:i=!0,actions:n}){let c=(0,t.useRouter)(),d=(0,t.usePathname)(),{themeConfig:u}=(0,o.useTheme)(),{isMobile:m}=(0,l.useMobileOptimizations)(),[x,p]=(0,s.useState)(!1),h=(()=>{if(a.length>0)return a;let e=d.split("/").filter(Boolean),r=[{label:"Home",href:"/"}],s="";return e.forEach((t,o)=>{s+=`/${t}`;let l=t.charAt(0).toUpperCase()+t.slice(1).replace(/-/g," ");o===e.length-1?r.push({label:l}):r.push({label:l,href:s})}),r})();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("header",{className:"sticky top-0 z-40 border-b",style:{backgroundColor:u.colors.background,borderColor:u.colors.border},children:(0,r.jsx)("div",{className:`${m?"px-4":"px-6"} py-3`,children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[i&&(0,r.jsx)("button",{onClick:()=>{p(!x)},className:"p-2 rounded-lg border transition-all duration-200 hover:bg-gray-50 active:scale-95",style:{borderColor:u.colors.border,backgroundColor:"transparent"},children:(0,r.jsx)("svg",{className:"w-5 h-5",style:{color:u.colors.text},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[e&&(0,r.jsx)("h1",{className:"text-lg font-semibold truncate",style:{color:u.colors.text,fontFamily:"Inter, system-ui, sans-serif"},children:e}),(0,r.jsx)("nav",{className:"flex items-center space-x-1 text-sm mt-1",children:h.map((e,t)=>(0,r.jsxs)(s.default.Fragment,{children:[t>0&&(0,r.jsx)("svg",{className:"w-4 h-4 flex-shrink-0",style:{color:u.colors.textSecondary},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),(0,r.jsx)("button",{onClick:()=>{var r;(r=e.href)&&c.push(r)},className:`truncate ${e.href?"hover:text-blue-400 transition-colors":"text-gray-300 font-medium"}`,style:{color:(e.href,u.colors.textSecondary),fontFamily:"Inter, system-ui, sans-serif"},children:e.label})]},t))})]})]}),n&&(0,r.jsx)("div",{className:"flex items-center space-x-2 ml-4",children:n})]})})}),x&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"fixed inset-0 z-30 bg-black bg-opacity-50",onClick:()=>p(!1)}),(0,r.jsxs)("div",{className:"fixed top-0 left-0 bottom-0 z-40 w-72 overflow-y-auto",style:{backgroundColor:u.colors.background,borderRight:`1px solid ${u.colors.border}`},children:[(0,r.jsx)("div",{className:"p-4 border-b",style:{borderColor:u.colors.border},children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold",style:{color:u.colors.text,fontFamily:"Inter, system-ui, sans-serif"},children:"Navigation"}),(0,r.jsx)("button",{onClick:()=>p(!1),className:"p-2 rounded-lg hover:bg-gray-50 transition-colors",children:(0,r.jsx)("svg",{className:"w-5 h-5",style:{color:u.colors.text},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,r.jsx)("nav",{className:"p-2",children:[{href:"/",label:"Home",icon:"ðŸ "},{href:"/dashboard",label:"Dashboard",icon:"ðŸ“Š"},{href:"/student",label:"User Requests",icon:"ðŸ“"},{href:"/student/history",label:"User History",icon:"ðŸ“š"},{href:"/settings",label:"Settings",icon:"âš™ï¸"}].map(e=>(0,r.jsxs)("button",{onClick:()=>{c.push(e.href),p(!1)},className:`w-full flex items-center space-x-3 px-3 py-2 rounded-lg transition-colors ${d===e.href?"bg-blue-50 text-blue-600":"hover:bg-gray-50"}`,style:{color:d===e.href?u.colors.primary:u.colors.text},children:[(0,r.jsx)("span",{className:"text-lg",children:e.icon}),(0,r.jsx)("span",{className:"font-medium",style:{fontFamily:"Inter, system-ui, sans-serif"},children:e.label}),d===e.href&&(0,r.jsx)("svg",{className:"w-4 h-4 ml-auto",fill:"currentColor",viewBox:"0 0 20 20",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]},e.href))})]})]})]})}e.s(["default",()=>a])},37141,e=>{"use strict";var r=e.i(43476),s=e.i(71645),t=e.i(18566),o=e.i(8013),l=e.i(87896),a=e.i(75176),i=e.i(63582);function n({params:e}){let{id:n}=(0,s.use)(e),c=(0,t.useRouter)(),{themeConfig:d}=(0,o.useTheme)(),[u,m]=(0,s.useState)(null),[x,p]=(0,s.useState)(!0),[h,b]=(0,s.useState)(!1),f=async()=>{try{p(!0);let e=await fetch(`/api/requests/${n}`);if(e.ok){let r=await e.json();m(r)}else c.push("/admin/requests")}catch(e){console.error("Error fetching request detail:",e)}finally{p(!1)}};(0,s.useEffect)(()=>{f()},[n]);let g=async e=>{try{b(!0),(await fetch(`/api/requests/${n}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:e})})).ok&&await f()}catch(e){console.error("Error updating status:",e)}finally{b(!1)}};return x?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center font-bold opacity-50",children:"Loading details..."}):u?(0,r.jsx)(l.default,{requiredRole:"ADMIN",children:(0,r.jsxs)("div",{className:"min-h-screen",style:{backgroundColor:d.colors.background},children:[(0,r.jsx)(a.default,{title:`Request #${n.slice(-4)}`,breadcrumbs:[{label:"Requests",href:"/admin/requests"},{label:"Details"}]}),(0,r.jsxs)("main",{className:"max-w-4xl mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"p-8 rounded-[2.5rem] border backdrop-blur-xl mb-8",style:{backgroundColor:d.colors.surface,borderColor:d.colors.border},children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between gap-6 mb-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest border mb-4 inline-block",style:{color:d.colors.primary,borderColor:`${d.colors.primary}40`,backgroundColor:`${d.colors.primary}05`},children:u.category}),(0,r.jsx)("h1",{className:"text-3xl font-black mb-2",children:u.title}),(0,r.jsx)("p",{className:"opacity-60",children:u.description})]}),(0,r.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[(0,r.jsx)("span",{className:"px-4 py-2 rounded-2xl font-black text-sm border",style:{color:"white",backgroundColor:"COMPLETED"===u.status?"#10b981":"#f59e0b",borderColor:"transparent"},children:u.status}),(0,r.jsxs)("p",{className:"text-xs opacity-50 font-bold",children:["Priority: ",u.priority]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-8 py-8 border-y",style:{borderColor:`${d.colors.border}40`},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-[10px] font-black uppercase tracking-widest opacity-40 mb-4",children:"Requester"}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 rounded-full bg-indigo-500 flex items-center justify-center text-white font-bold",children:u.user?.name?.[0]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-bold",children:u.user?.name}),(0,r.jsx)("p",{className:"text-xs opacity-60",children:u.user?.email})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"text-[10px] font-black uppercase tracking-widest opacity-40 mb-4",children:"Location"}),(0,r.jsx)("p",{className:"font-bold",children:u.location}),(0,r.jsxs)("p",{className:"text-xs opacity-60",children:["Submitted on ",new Date(u.createdAt).toLocaleString()]})]})]}),u.images&&(0,r.jsxs)("div",{className:"mt-8",children:[(0,r.jsx)("h4",{className:"text-[10px] font-black uppercase tracking-widest opacity-40 mb-4",children:"Attached Images"}),(0,r.jsx)("div",{className:"grid grid-cols-2 gap-4",children:("string"==typeof u.images?JSON.parse(u.images):u.images).map((e,s)=>(0,r.jsx)("img",{src:e,alt:"Request attachment",className:"rounded-2xl border w-full h-48 object-cover"},s))})]})]}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-4 justify-center",children:["PENDING"===u.status&&(0,r.jsx)(i.default,{onClick:()=>g("IN_PROGRESS"),loading:h,children:"Start Working"}),"IN_PROGRESS"===u.status&&(0,r.jsx)(i.default,{onClick:()=>g("COMPLETED"),loading:h,style:{backgroundColor:"#10b981"},children:"Mark as Completed"}),"CANCELLED"!==u.status&&"COMPLETED"!==u.status&&(0,r.jsx)(i.default,{variant:"secondary",onClick:()=>g("CANCELLED"),loading:h,children:"Cancel Request"})]})]})]})}):null}e.s(["default",()=>n])}]);