(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,46044,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(18566),l=e.i(14734);function a(){let e=(0,s.useRouter)(),[a,o]=(0,r.useState)({title:"",description:"",category:"PLUMBING",priority:"MEDIUM",location:""}),[i,n]=(0,r.useState)(!1),[d,c]=(0,r.useState)([]),[h,u]=(0,r.useState)([]),x=async t=>{t.preventDefault(),n(!0);try{let t=[];for(let e of d){let r=await new Promise(t=>{let r=new FileReader;r.onload=e=>t(e.target?.result),r.readAsDataURL(e)});t.push(r)}let r={title:a.title,description:a.description,category:a.category,priority:a.priority,status:"PENDING",location:a.location,requestedBy:"Current Student",images:t};(0,l.addMaintenanceRequest)(r),o({title:"",description:"",category:"PLUMBING",priority:"MEDIUM",location:""}),c([]),u([]),e.push("/")}catch(e){console.error("Error submitting request:",e),alert("Failed to submit request. Please try again.")}finally{n(!1)}},m=e=>{o({...a,[e.target.name]:e.target.value})};return(0,t.jsxs)("div",{className:"flex h-screen bg-white",children:[(0,t.jsxs)("div",{className:"w-12 bg-gray-900 flex flex-col items-center py-3 space-y-4",children:[(0,t.jsx)("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),(0,t.jsxs)("nav",{className:"flex-1 flex flex-col space-y-3",children:[(0,t.jsx)("button",{onClick:()=>e.push("/student"),className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center text-white",children:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),(0,t.jsx)("button",{onClick:()=>e.push("/student/requests"),className:"w-8 h-8 bg-gray-700 rounded-lg flex items-center justify-center text-gray-300 hover:bg-gray-600",children:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),(0,t.jsx)("button",{onClick:()=>e.push("/student/messages"),className:"w-8 h-8 bg-gray-700 rounded-lg flex items-center justify-center text-gray-300 hover:bg-gray-600",children:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),(0,t.jsx)("button",{onClick:()=>e.push("/student/profile"),className:"w-8 h-8 bg-gray-700 rounded-lg flex items-center justify-center text-gray-300 hover:bg-gray-600",children:(0,t.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})]}),(0,t.jsx)("div",{className:"w-8 h-8 bg-gray-700 rounded-full flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-4 h-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})]}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col h-screen overflow-hidden",children:[(0,t.jsxs)("header",{className:"bg-blue-600 px-4 py-3 flex items-center justify-between",children:[(0,t.jsx)("h1",{className:"text-white font-medium text-base",children:"New Request"}),(0,t.jsx)("button",{onClick:()=>e.push("/"),className:"text-white p-1",children:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto px-4 py-4",children:(0,t.jsxs)("form",{onSubmit:x,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-1",children:"What needs to be fixed?"}),(0,t.jsx)("input",{type:"text",name:"title",value:a.title,onChange:m,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-gray-900 placeholder-gray-500 text-sm",placeholder:"e.g., Leaky faucet"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-1",children:"Where is it?"}),(0,t.jsx)("input",{type:"text",name:"location",value:a.location,onChange:m,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-gray-900 placeholder-gray-500 text-sm",placeholder:"e.g., Dorm 2, Room 301"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-1",children:"Describe the problem"}),(0,t.jsx)("textarea",{name:"description",value:a.description,onChange:m,required:!0,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-gray-900 placeholder-gray-500 resize-none text-sm",placeholder:"What's wrong?"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-1",children:"Type"}),(0,t.jsxs)("select",{name:"category",value:a.category,onChange:m,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-gray-900 text-sm",children:[(0,t.jsx)("option",{value:"PLUMBING",children:"Plumbing"}),(0,t.jsx)("option",{value:"ELECTRICAL",children:"Electrical"}),(0,t.jsx)("option",{value:"CARPENTRY",children:"Carpentry"}),(0,t.jsx)("option",{value:"PERSONNEL",children:"Personnel"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-1",children:"Priority"}),(0,t.jsxs)("select",{name:"priority",value:a.priority,onChange:m,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-gray-900 text-sm",children:[(0,t.jsx)("option",{value:"LOW",children:"Low"}),(0,t.jsx)("option",{value:"MEDIUM",children:"Medium"}),(0,t.jsx)("option",{value:"HIGH",children:"High"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-1",children:"Add photos (optional)"}),(0,t.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center",children:[(0,t.jsx)("input",{type:"file",multiple:!0,accept:"image/*",onChange:e=>{let t=Array.from(e.target.files||[]),r=t.filter(e=>e.type.startsWith("image/")&&e.size<=5242880);r.length!==t.length&&alert("Some files were invalid. Please only upload images under 5MB."),c(e=>[...e,...r]),r.forEach(e=>{let t=new FileReader;t.onload=e=>{u(t=>[...t,e.target?.result])},t.readAsDataURL(e)})},className:"hidden",id:"photos"}),(0,t.jsxs)("label",{htmlFor:"photos",className:"cursor-pointer",children:[(0,t.jsx)("svg",{className:"w-8 h-8 text-gray-400 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),(0,t.jsx)("p",{className:"text-xs text-gray-600",children:"Tap to add photos"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Max 5MB each"})]})]}),h.length>0&&(0,t.jsx)("div",{className:"mt-3 grid grid-cols-3 gap-2",children:h.map((e,r)=>(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("img",{src:e,alt:`Preview ${r+1}`,className:"w-full h-16 object-cover rounded-lg"}),(0,t.jsx)("button",{type:"button",onClick:()=>{c(e=>e.filter((e,t)=>t!==r)),u(e=>e.filter((e,t)=>t!==r))},className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 text-white rounded-full text-xs",children:"Ã—"})]},r))})]}),(0,t.jsx)("button",{type:"submit",disabled:i,className:"w-full py-3 bg-blue-600 text-white font-medium rounded-lg disabled:opacity-50 text-sm",children:i?"Submitting...":"Submit Request"})]})})]})]})}e.s(["default",()=>a])},29219,e=>{e.n(e.i(46044))}]);