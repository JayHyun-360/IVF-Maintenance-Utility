(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,46044,e=>{"use strict";var t=e.i(43476),r=e.i(71645),s=e.i(18566),a=e.i(14734);function l(){let e=(0,s.useRouter)(),[l,i]=(0,r.useState)({title:"",description:"",category:"PLUMBING",priority:"MEDIUM",location:""}),[o,n]=(0,r.useState)(!1),[d,c]=(0,r.useState)([]),[h,m]=(0,r.useState)([]),x=async t=>{t.preventDefault(),n(!0);try{let t=[];for(let e of d){let r=await new Promise(t=>{let r=new FileReader;r.onload=e=>t(e.target?.result),r.readAsDataURL(e)});t.push(r)}let r={title:l.title,description:l.description,category:l.category,priority:l.priority,status:"PENDING",location:l.location,requestedBy:"Current Student",images:t};(0,a.addMaintenanceRequest)(r),i({title:"",description:"",category:"PLUMBING",priority:"MEDIUM",location:""}),c([]),m([]),e.push("/")}catch(e){console.error("Error submitting request:",e),alert("Failed to submit request. Please try again.")}finally{n(!1)}},u=e=>{i({...l,[e.target.name]:e.target.value})};return(0,t.jsxs)("div",{className:"min-h-screen bg-white",children:[(0,t.jsx)("header",{className:"bg-blue-600 px-4 py-3",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("button",{onClick:()=>e.push("/"),className:"text-white",children:(0,t.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),(0,t.jsx)("h1",{className:"text-white font-semibold text-lg",children:"New Request"}),(0,t.jsx)("div",{className:"w-6"})]})}),(0,t.jsx)("main",{className:"px-4 py-6 pb-20",children:(0,t.jsxs)("form",{onSubmit:x,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-1",children:"What needs to be fixed?"}),(0,t.jsx)("input",{type:"text",name:"title",value:l.title,onChange:u,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-gray-900 placeholder-gray-500",placeholder:"e.g., Leaky faucet"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-1",children:"Where is it?"}),(0,t.jsx)("input",{type:"text",name:"location",value:l.location,onChange:u,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-gray-900 placeholder-gray-500",placeholder:"e.g., Dorm 2, Room 301"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-1",children:"Describe the problem"}),(0,t.jsx)("textarea",{name:"description",value:l.description,onChange:u,required:!0,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-gray-900 placeholder-gray-500 resize-none",placeholder:"What's wrong?"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-1",children:"Type"}),(0,t.jsxs)("select",{name:"category",value:l.category,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-gray-900",children:[(0,t.jsx)("option",{value:"PLUMBING",children:"Plumbing"}),(0,t.jsx)("option",{value:"ELECTRICAL",children:"Electrical"}),(0,t.jsx)("option",{value:"CARPENTRY",children:"Carpentry"}),(0,t.jsx)("option",{value:"PERSONNEL",children:"Personnel"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-1",children:"Priority"}),(0,t.jsxs)("select",{name:"priority",value:l.priority,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-gray-900",children:[(0,t.jsx)("option",{value:"LOW",children:"Low"}),(0,t.jsx)("option",{value:"MEDIUM",children:"Medium"}),(0,t.jsx)("option",{value:"HIGH",children:"High"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-900 mb-1",children:"Add photos (optional)"}),(0,t.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center",children:[(0,t.jsx)("input",{type:"file",multiple:!0,accept:"image/*",onChange:e=>{let t=Array.from(e.target.files||[]),r=t.filter(e=>e.type.startsWith("image/")&&e.size<=5242880);r.length!==t.length&&alert("Some files were invalid. Please only upload images under 5MB."),c(e=>[...e,...r]),r.forEach(e=>{let t=new FileReader;t.onload=e=>{m(t=>[...t,e.target?.result])},t.readAsDataURL(e)})},className:"hidden",id:"photos"}),(0,t.jsxs)("label",{htmlFor:"photos",className:"cursor-pointer",children:[(0,t.jsx)("svg",{className:"w-8 h-8 text-gray-400 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Tap to add photos"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Max 5MB each"})]})]}),h.length>0&&(0,t.jsx)("div",{className:"mt-2 grid grid-cols-3 gap-2",children:h.map((e,r)=>(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("img",{src:e,alt:`Preview ${r+1}`,className:"w-full h-20 object-cover rounded-lg"}),(0,t.jsx)("button",{type:"button",onClick:()=>{c(e=>e.filter((e,t)=>t!==r)),m(e=>e.filter((e,t)=>t!==r))},className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white rounded-full text-xs",children:"Ã—"})]},r))})]}),(0,t.jsx)("button",{type:"submit",disabled:o,className:"w-full py-3 bg-blue-600 text-white font-medium rounded-lg disabled:opacity-50",children:o?"Submitting...":"Submit Request"})]})}),(0,t.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200",children:(0,t.jsxs)("div",{className:"grid grid-cols-3 py-2",children:[(0,t.jsxs)("button",{onClick:()=>e.push("/"),className:"flex flex-col items-center py-2 text-gray-600",children:[(0,t.jsx)("svg",{className:"w-5 h-5 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),(0,t.jsx)("span",{className:"text-xs",children:"Home"})]}),(0,t.jsxs)("button",{className:"flex flex-col items-center py-2 text-blue-600",children:[(0,t.jsx)("svg",{className:"w-5 h-5 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),(0,t.jsx)("span",{className:"text-xs",children:"Request"})]}),(0,t.jsxs)("button",{className:"flex flex-col items-center py-2 text-gray-600",children:[(0,t.jsx)("svg",{className:"w-5 h-5 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),(0,t.jsx)("span",{className:"text-xs",children:"History"})]})]})})]})}e.s(["default",()=>l])},29219,e=>{e.n(e.i(46044))}]);