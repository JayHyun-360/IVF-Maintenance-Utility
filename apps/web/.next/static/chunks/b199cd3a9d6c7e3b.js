(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,s,r)=>{s.exports=e.r(76562)},99809,e=>{"use strict";var s=e.i(71645);function r(){let[e,r]=(0,s.useState)({isMobile:!1,isTablet:!1,isDesktop:!0,screenWidth:1024,screenHeight:768,orientation:"landscape",supportsTouch:!1,supportsHaptic:!1,safeAreaInsets:{top:0,right:0,bottom:0,left:0}});return(0,s.useEffect)(()=>(setTimeout(()=>{let e=()=>{let e=window.innerWidth,s=window.innerHeight,t=getComputedStyle(document.documentElement),o={top:parseInt(t.getPropertyValue("--mobile-safe-area-top")||"0"),right:parseInt(t.getPropertyValue("--mobile-safe-area-right")||"0"),bottom:parseInt(t.getPropertyValue("--mobile-safe-area-bottom")||"0"),left:parseInt(t.getPropertyValue("--mobile-safe-area-left")||"0")};r({isMobile:e<768,isTablet:e>=768&&e<1024,isDesktop:e>=1024,screenWidth:e,screenHeight:s,orientation:e>s?"landscape":"portrait",supportsTouch:"ontouchstart"in window||navigator.maxTouchPoints>0,supportsHaptic:"vibrate"in navigator,safeAreaInsets:o})};e();let s=new ResizeObserver(e);s.observe(document.body);let t=()=>{setTimeout(e,100)};return window.addEventListener("orientationchange",t),window.addEventListener("resize",e),()=>{s.disconnect(),window.removeEventListener("orientationchange",t),window.removeEventListener("resize",e)}},100),()=>{}),[]),e}function t(){let{supportsHaptic:e}=r(),s=(s=10)=>{if(e&&navigator.vibrate)try{navigator.vibrate(s)}catch(e){console.warn("Haptic feedback not supported:",e)}};return{triggerHaptic:s,triggerLightHaptic:()=>s(10),triggerMediumHaptic:()=>s([10,50,10]),triggerHeavyHaptic:()=>s([20,100,20]),triggerSuccessHaptic:()=>s([10,30,10,30,10]),triggerErrorHaptic:()=>s([50,50,50,50,50]),supportsHaptic:e}}e.s(["useHapticFeedback",()=>t,"useMobileOptimizations",()=>r])},87896,e=>{"use strict";var s=e.i(43476),r=e.i(71645),t=e.i(17255),o=e.i(18566),l=e.i(8013);function i({children:e,requiredRole:i,redirectTo:a="/login"}){let{data:n,status:c}=(0,t.useSession)(),d=(0,o.useRouter)(),{themeConfig:u}=(0,l.useTheme)(),[m,x]=(0,r.useState)(!1),[h,p]=(0,r.useState)("");return((0,r.useEffect)(()=>{let e=setTimeout(()=>{"loading"===c&&(x(!0),p(`Status: ${c}, Session: ${!!n}, Required Role: ${i}`))},5e3);return()=>clearTimeout(e)},[c,n,i]),(0,r.useEffect)(()=>{if(console.log("AuthGuard Debug:",{status:c,hasSession:!!n,userRole:n?.user?.role,requiredRole:i,redirectTo:a}),"loading"!==c){if(!n){console.log("No session found, redirecting to:",a),d.push(a);return}if(i&&n.user?.role!==i){console.log("Role mismatch:",{userRole:n.user?.role,requiredRole:i}),"ADMIN"===i&&n.user?.role!=="ADMIN"?d.push("/student"):"USER"===i&&n.user?.role==="ADMIN"||d.push("/login");return}}},[n,c,d,i,a]),"loading"===c)?m?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:u.colors.background},children:(0,s.jsxs)("div",{className:"text-center max-w-md mx-auto p-6",children:[(0,s.jsx)("div",{className:"rounded-full h-12 w-12 mx-auto mb-4 flex items-center justify-center",style:{backgroundColor:`${u.colors.warning}20`},children:(0,s.jsx)("svg",{className:"w-6 h-6",style:{color:u.colors.warning},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,s.jsx)("p",{style:{color:u.colors.text,fontFamily:"Inter, system-ui, sans-serif",marginBottom:"16px"},children:"Authentication is taking longer than expected"}),h&&(0,s.jsx)("p",{style:{color:u.colors.textSecondary,fontFamily:"monospace",fontSize:"12px",marginBottom:"16px"},children:h}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("button",{onClick:()=>window.location.reload(),style:{backgroundColor:u.colors.primary,color:"white",padding:"8px 16px",borderRadius:"6px",fontSize:"14px",cursor:"pointer",marginRight:"8px"},children:"Refresh Page"}),(0,s.jsx)("button",{onClick:()=>d.push("/login"),style:{backgroundColor:u.colors.textSecondary,color:"white",padding:"8px 16px",borderRadius:"6px",fontSize:"14px",cursor:"pointer"},children:"Go to Login"})]})]})}):(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:u.colors.background},children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 mx-auto mb-4",style:{borderColor:u.colors.primary}}),(0,s.jsx)("p",{style:{color:u.colors.text,fontFamily:"Inter, system-ui, sans-serif"},children:"Verifying access..."}),(0,s.jsxs)("p",{style:{color:u.colors.textSecondary,fontFamily:"Inter, system-ui, sans-serif",fontSize:"12px",marginTop:"8px"},children:["Status: ",c]})]})}):(0,s.jsx)(s.Fragment,{children:e})}e.s(["default",()=>i])},75176,e=>{"use strict";var s=e.i(43476),r=e.i(71645),t=e.i(18566),o=e.i(8013),l=e.i(99809);function i({title:e,breadcrumbs:i=[],showMenuToggle:a=!0,actions:n}){let c=(0,t.useRouter)(),d=(0,t.usePathname)(),{themeConfig:u}=(0,o.useTheme)(),{isMobile:m}=(0,l.useMobileOptimizations)(),[x,h]=(0,r.useState)(!1),p=(()=>{if(i.length>0)return i;let e=d.split("/").filter(Boolean),s=[{label:"Home",href:"/"}],r="";return e.forEach((t,o)=>{r+=`/${t}`;let l=t.charAt(0).toUpperCase()+t.slice(1).replace(/-/g," ");o===e.length-1?s.push({label:l}):s.push({label:l,href:r})}),s})();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("header",{className:"sticky top-0 z-40 border-b",style:{backgroundColor:u.colors.background,borderColor:u.colors.border},children:(0,s.jsx)("div",{className:`${m?"px-4":"px-6"} py-3`,children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[a&&(0,s.jsx)("button",{onClick:()=>{h(!x)},className:"p-2 rounded-lg border transition-all duration-200 hover:bg-gray-50 active:scale-95",style:{borderColor:u.colors.border,backgroundColor:"transparent"},children:(0,s.jsx)("svg",{className:"w-5 h-5",style:{color:u.colors.text},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[e&&(0,s.jsx)("h1",{className:"text-lg font-semibold truncate",style:{color:u.colors.text,fontFamily:"Inter, system-ui, sans-serif"},children:e}),(0,s.jsx)("nav",{className:"flex items-center space-x-1 text-sm mt-1",children:p.map((e,t)=>(0,s.jsxs)(r.default.Fragment,{children:[t>0&&(0,s.jsx)("svg",{className:"w-4 h-4 flex-shrink-0",style:{color:u.colors.textSecondary},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),(0,s.jsx)("button",{onClick:()=>{var s;(s=e.href)&&c.push(s)},className:`truncate ${e.href?"hover:text-blue-600 transition-colors":"text-gray-500 font-medium"}`,style:{color:(e.href,u.colors.textSecondary),fontFamily:"Inter, system-ui, sans-serif"},children:e.label})]},t))})]})]}),n&&(0,s.jsx)("div",{className:"flex items-center space-x-2 ml-4",children:n})]})})}),x&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"fixed inset-0 z-30 bg-black bg-opacity-50",onClick:()=>h(!1)}),(0,s.jsxs)("div",{className:"fixed top-0 left-0 bottom-0 z-40 w-72 overflow-y-auto",style:{backgroundColor:u.colors.background,borderRight:`1px solid ${u.colors.border}`},children:[(0,s.jsx)("div",{className:"p-4 border-b",style:{borderColor:u.colors.border},children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold",style:{color:u.colors.text,fontFamily:"Inter, system-ui, sans-serif"},children:"Navigation"}),(0,s.jsx)("button",{onClick:()=>h(!1),className:"p-2 rounded-lg hover:bg-gray-50 transition-colors",children:(0,s.jsx)("svg",{className:"w-5 h-5",style:{color:u.colors.text},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,s.jsx)("nav",{className:"p-2",children:[{href:"/",label:"Home",icon:"ðŸ "},{href:"/dashboard",label:"Dashboard",icon:"ðŸ“Š"},{href:"/student",label:"Requests",icon:"ðŸ“"},{href:"/student/history",label:"History",icon:"ðŸ“š"},{href:"/settings",label:"Settings",icon:"âš™ï¸"}].map(e=>(0,s.jsxs)("button",{onClick:()=>{c.push(e.href),h(!1)},className:`w-full flex items-center space-x-3 px-3 py-2 rounded-lg transition-colors ${d===e.href?"bg-blue-50 text-blue-600":"hover:bg-gray-50"}`,style:{color:d===e.href?u.colors.primary:u.colors.text},children:[(0,s.jsx)("span",{className:"text-lg",children:e.icon}),(0,s.jsx)("span",{className:"font-medium",style:{fontFamily:"Inter, system-ui, sans-serif"},children:e.label}),d===e.href&&(0,s.jsx)("svg",{className:"w-4 h-4 ml-auto",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]},e.href))})]})]})]})}e.s(["default",()=>i])},8135,e=>{"use strict";var s=e.i(43476),r=e.i(71645),t=e.i(18566),o=e.i(8013),l=e.i(87896),i=e.i(99809),a=e.i(75176);function n(){let e=(0,t.useRouter)(),{themeConfig:n}=(0,o.useTheme)(),{isMobile:c}=(0,i.useMobileOptimizations)(),[d,u]=(0,r.useState)([]),[m,x]=(0,r.useState)(!0),[h,p]=(0,r.useState)("ALL"),[f,b]=(0,r.useState)(""),g=async()=>{try{x(!0);let e="ALL"===h?"/api/requests":`/api/requests?status=${h}`,s=await fetch(e);if(s.ok){let e=await s.json();u(e)}}catch(e){console.error("Error fetching requests:",e)}finally{x(!1)}};(0,r.useEffect)(()=>{g()},[h]);let y=e=>{switch(e){case"PENDING":return"#f59e0b";case"IN_PROGRESS":return"#3b82f6";case"COMPLETED":return"#10b981";case"CANCELLED":return"#ef4444";default:return"#6b7280"}},j=d.filter(e=>e.title.toLowerCase().includes(f.toLowerCase())||e.location.toLowerCase().includes(f.toLowerCase())||e.user?.name?.toLowerCase().includes(f.toLowerCase()));return(0,s.jsx)(l.default,{requiredRole:"ADMIN",children:(0,s.jsxs)("div",{className:"min-h-screen",style:{backgroundColor:n.colors.background},children:[(0,s.jsx)(a.default,{title:"Maintenance Requests",breadcrumbs:[{label:"Dashboard",href:"/admin/dashboard"},{label:"Requests"}]}),(0,s.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,s.jsxs)("div",{className:"mb-8 flex flex-col sm:flex-row gap-4 justify-between items-center",children:[(0,s.jsx)("div",{className:"relative w-full sm:w-96",children:(0,s.jsx)("input",{type:"text",placeholder:"Search requests...",value:f,onChange:e=>b(e.target.value),className:"w-full px-4 py-2 rounded-xl border focus:ring-2 outline-none transition-all",style:{backgroundColor:n.colors.surface,borderColor:n.colors.border,color:n.colors.text}})}),(0,s.jsx)("div",{className:"flex gap-2 w-full sm:w-auto overflow-x-auto pb-2 sm:pb-0",children:["ALL","PENDING","IN_PROGRESS","COMPLETED","CANCELLED"].map(e=>(0,s.jsx)("button",{onClick:()=>p(e),className:`px-4 py-2 rounded-xl text-sm font-bold transition-all whitespace-nowrap ${h===e?"shadow-lg scale-105":"opacity-60 hover:opacity-100"}`,style:{backgroundColor:h===e?n.colors.primary:n.colors.surface,color:h===e?"white":n.colors.text,border:`1px solid ${n.colors.border}`},children:e},e))})]}),m?(0,s.jsx)("div",{className:"text-center py-20 opacity-50 font-bold",children:"Loading requests..."}):0===j.length?(0,s.jsx)("div",{className:"text-center py-20 opacity-50 font-bold",children:"No requests found."}):(0,s.jsx)("div",{className:"grid grid-cols-1 gap-4",children:j.map(r=>(0,s.jsx)("div",{onClick:()=>e.push(`/admin/requests/${r.id}`),className:"group p-6 rounded-[2rem] border backdrop-blur-xl transition-all duration-300 hover:translate-y-[-4px] cursor-pointer",style:{backgroundColor:`${n.colors.surface}80`,borderColor:`${n.colors.border}40`},children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center text-2xl",style:{backgroundColor:`${y(r.status)}15`},children:"PLUMBING"===r.category?"ðŸ’§":"ELECTRICAL"===r.category?"âš¡":"ðŸ› ï¸"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold text-lg",children:r.title}),(0,s.jsxs)("p",{className:"text-sm opacity-60",children:[r.user?.name," â€¢ ",r.location," â€¢"," ",new Date(r.createdAt).toLocaleDateString()]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3 self-end sm:self-center",children:[(0,s.jsx)("span",{className:"px-4 py-1.5 rounded-full text-[10px] font-black tracking-widest uppercase border",style:{color:y(r.status),borderColor:`${y(r.status)}40`,backgroundColor:`${y(r.status)}05`},children:r.status}),(0,s.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center transition-all group-hover:translate-x-1",style:{backgroundColor:`${n.colors.text}08`},children:"â†’"})]})]})},r.id))})]})]})})}e.s(["default",()=>n])}]);