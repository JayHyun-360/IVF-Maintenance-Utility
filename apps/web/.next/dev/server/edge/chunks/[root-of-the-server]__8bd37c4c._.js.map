{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/apps/web/src/middleware.ts"],"sourcesContent":["import { withAuth } from \"next-auth/middleware\";\r\n\r\nexport default withAuth(\r\n  function middleware() {\r\n    // Add any additional middleware logic here\r\n  },\r\n  {\r\n    callbacks: {\r\n      authorized: ({ token, req }) => {\r\n        // Allow access to login page and API routes\r\n        if (\r\n          req.nextUrl.pathname.startsWith(\"/login\") ||\r\n          req.nextUrl.pathname.startsWith(\"/api\") ||\r\n          req.nextUrl.pathname === \"/\"\r\n        ) {\r\n          return true;\r\n        }\r\n\r\n        // Protect admin routes\r\n        if (req.nextUrl.pathname.startsWith(\"/admin\")) {\r\n          return token?.role === \"ADMIN\";\r\n        }\r\n\r\n        // Protect staff routes (admin and staff roles)\r\n        if (req.nextUrl.pathname.startsWith(\"/staff\")) {\r\n          return token?.role === \"ADMIN\" || token?.role === \"STAFF\";\r\n        }\r\n\r\n        // Protect user routes\r\n        if (req.nextUrl.pathname.startsWith(\"/student\")) {\r\n          return !!token;\r\n        }\r\n\r\n        // Protect dashboard (role-based redirect handled by component)\r\n        if (req.nextUrl.pathname.startsWith(\"/dashboard\")) {\r\n          return !!token;\r\n        }\r\n\r\n        // Protect settings\r\n        if (req.nextUrl.pathname.startsWith(\"/settings\")) {\r\n          return !!token;\r\n        }\r\n\r\n        // Protect emergency\r\n        if (req.nextUrl.pathname.startsWith(\"/emergency\")) {\r\n          return !!token;\r\n        }\r\n\r\n        return true;\r\n      },\r\n    },\r\n  },\r\n);\r\n\r\nexport const config = {\r\n  matcher: [\r\n    \"/admin/:path*\",\r\n    \"/student/:path*\",\r\n    \"/staff/:path*\",\r\n    \"/settings/:path*\",\r\n    \"/emergency/:path*\",\r\n    \"/dashboard/:path*\",\r\n    \"/api/admin/:path*\",\r\n    \"/api/requests/:path*\",\r\n  ],\r\n};\r\n"],"names":[],"mappings":";;;;;;AAAA;;uCAEe,IAAA,8JAAQ,EACrB,SAAS;AACP,2CAA2C;AAC7C,GACA;IACE,WAAW;QACT,YAAY,CAAC,EAAE,KAAK,EAAE,GAAG,EAAE;YACzB,4CAA4C;YAC5C,IACE,IAAI,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC,aAChC,IAAI,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC,WAChC,IAAI,OAAO,CAAC,QAAQ,KAAK,KACzB;gBACA,OAAO;YACT;YAEA,uBAAuB;YACvB,IAAI,IAAI,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC,WAAW;gBAC7C,OAAO,OAAO,SAAS;YACzB;YAEA,+CAA+C;YAC/C,IAAI,IAAI,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC,WAAW;gBAC7C,OAAO,OAAO,SAAS,WAAW,OAAO,SAAS;YACpD;YAEA,sBAAsB;YACtB,IAAI,IAAI,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC,aAAa;gBAC/C,OAAO,CAAC,CAAC;YACX;YAEA,+DAA+D;YAC/D,IAAI,IAAI,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC,eAAe;gBACjD,OAAO,CAAC,CAAC;YACX;YAEA,mBAAmB;YACnB,IAAI,IAAI,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC,cAAc;gBAChD,OAAO,CAAC,CAAC;YACX;YAEA,oBAAoB;YACpB,IAAI,IAAI,OAAO,CAAC,QAAQ,CAAC,UAAU,CAAC,eAAe;gBACjD,OAAO,CAAC,CAAC;YACX;YAEA,OAAO;QACT;IACF;AACF;AAGK,MAAM,SAAS;IACpB,SAAS;QACP;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;AACH"}}]
}